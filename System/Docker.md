# Docker


[[toc]]



## Flag

+ [https://github.com/topics/cloudnative](https://github.com/topics/cloudnative)
+ [https://github.com/topics/openstack](https://github.com/topics/openstack)
+ [https://github.com/docker](https://github.com/docker)
    + [https://www.docker.com](https://www.docker.com)
    + [https://docs.docker.com](https://docs.docker.com)
    + Windows10以下安装: [https://github.com/docker/toolbox](https://github.com/docker/toolbox)
+ [https://github.com/boot2docker](https://github.com/boot2docker)
+ [https://github.com/portainer/portainer](https://github.com/portainer/portainer)
    + [Docker及图形化管理UI Portainer的搭建](https://juejin.im/post/5da3de28518825651b1e0633)
+ [利用Docker实现后台项目模板化配置部署](https://juejin.im/post/5da81a7d6fb9a04def4e6d6b)
+ [https://github.com/earthly/earthly](https://github.com/earthly/earthly)
+ [https://github.com/StefanScherer/docker-cli-builder](https://github.com/StefanScherer/docker-cli-builder)
+ [https://github.com/skanehira/docui](https://github.com/skanehira/docui)
+ [https://github.com/jesseduffield/lazydocker](https://github.com/jesseduffield/lazydocker)
+ [https://github.com/DockStation/dockstation](https://github.com/DockStation/dockstation)


* [Docker进阶实用命令](https://sleele.com/2018/09/27/docker%e8%bf%9b%e9%98%b6%e5%ae%9e%e7%94%a8%e5%91%bd%e4%bb%a4/)
* [https://sleele.com/category/docker/](https://sleele.com/category/docker/)
* [https://docs.microsoft.com/zh-cn/virtualization](https://docs.microsoft.com/zh-cn/virtualization)
* [https://developer.ibm.com/zh/technologies/containers](https://developer.ibm.com/zh/technologies/containers)
* [随笔分类 - Docker](https://www.cnblogs.com/itoak/category/1769634.html)
* 容器自动化构建 [https://kany.me/tags/docker](https://kany.me/tags/docker)
* [在 Windows 10 底下不使用 Hyper-V 安裝 Docker](http://skychang.github.io/2019/03/30/Docker-Install_Docker_Without_HyperV_In_Windows_10)
* [https://docs.microsoft.com/zh-cn/virtualization/windowscontainers/quick-start/set-up-environment](https://docs.microsoft.com/zh-cn/virtualization/windowscontainers/quick-start/set-up-environment)
* [https://github.com/badtuxx/DescomplicandoDocker](https://github.com/badtuxx/DescomplicandoDocker)
* [https://github.com/yeasy/docker_practice](https://github.com/yeasy/docker_practice)


- 测试容器 [https://github.com/testcontainers](https://github.com/testcontainers)
- 自己动手写docker [https://github.com/xianlubird/mydocker](https://github.com/xianlubird/mydocker)
- 云原生构建包 [https://github.com/buildpacks](https://github.com/buildpacks)
- 构建应用程序 [https://github.com/paketo-buildpacks](https://github.com/paketo-buildpacks)
- [https://github.com/dragonflyoss/Dragonfly](https://github.com/dragonflyoss/Dragonfly)
- [https://github.com/Alluxio/alluxio](https://github.com/Alluxio/alluxio)
- [https://github.com/weaveworks/weave](https://github.com/weaveworks/weave)
- [https://github.com/jessfraz/dockerfiles](https://github.com/jessfraz/dockerfiles)


**Docker搭建私有仓库**

+ 企业级Registry服务器 [https://github.com/goharbor/harbor](https://github.com/goharbor/harbor)
+ [Docker 私有仓库搭建](https://www.cnblogs.com/huanchupkblog/p/10843800.html)
+ [从零搭建docker私有仓库](https://www.jianshu.com/p/2d9d4cdd3af7)




## 其他容器技术

+ [https://github.com/topics/containers](https://github.com/topics/containers)
+ OCI开放容器标准 [https://github.com/opencontainers](https://github.com/opencontainers)
    + [https://opencontainers.org](https://opencontainers.org)
+ 云原生技术图谱 [https://github.com/cncf/landscape](https://github.com/cncf/landscape)
+ [OCI,CRI,CRI-O,Containerd 名词解释](https://blog.csdn.net/weixin_40864891/article/details/86655846)


* 策略 [https://github.com/open-policy-agent](https://github.com/open-policy-agent)
* Go编写的迷你Docker [https://github.com/shuveb/containers-the-hard-way](https://github.com/shuveb/containers-the-hard-way)
* [https://github.com/falcosecurity](https://github.com/falcosecurity)
* [https://github.com/draios](https://github.com/draios)
* [https://github.com/istio/istio](https://github.com/istio/istio)
* [从开发者的角度比较Kubernetes和Cloud Foundry](http://dockone.io/article/5679)
* k8s [https://github.com/kubernetes](https://github.com/kubernetes)
    * [https://github.com/kubernetes-incubator](https://github.com/kubernetes-incubator)
    * [https://github.com/kubernetes-sigs](https://github.com/kubernetes-sigs)
    * [https://kubernetes.io](https://kubernetes.io)
    * 存储 [https://github.com/openebs/openebs](https://github.com/openebs/openebs)
    * 软件包管理器 [https://github.com/helm](https://github.com/helm)
    * 脚本安装K8S集群 [https://github.com/easzlab/kubeasz](https://github.com/easzlab/kubeasz)
    * [https://github.com/armosec/kubescape](https://github.com/armosec/kubescape)
    * [https://github.com/fanux/sealos](https://github.com/fanux/sealos)
    * [https://github.com/clusternet/clusternet](https://github.com/clusternet/clusternet)
    * [https://github.com/genuinetools](https://github.com/genuinetools)
    * [https://github.com/kubernetes-sigs](https://github.com/kubernetes-sigs)
    * [https://github.com/tektoncd/pipeline](https://github.com/tektoncd/pipeline)
    * [https://github.com/rancher/fleet](https://github.com/rancher/fleet)
    * [https://github.com/splunk/qbec](https://github.com/splunk/qbec)
    * [https://github.com/kube-rs](https://github.com/kube-rs)
* [https://github.com/openshift](https://github.com/openshift)
* [https://github.com/rook/rook](https://github.com/rook/rook)
* [https://github.com/lensapp/lens](https://github.com/lensapp/lens)
* [https://github.com/jenkins-x](https://github.com/jenkins-x)
* [https://github.com/kinvolk](https://github.com/kinvolk)
* [https://github.com/dapr](https://github.com/dapr)
* [https://github.com/dokku](https://github.com/dokku)
* [https://github.com/cloudfoundry](https://github.com/cloudfoundry)
    * [https://github.com/cloudfoundry-incubator](https://github.com/cloudfoundry-incubator)
    * [https://www.cloudfoundry.org](https://www.cloudfoundry.org)
* [https://github.com/distribution/distribution](https://github.com/distribution/distribution)
* [cloud-foundry 的动态 - SegmentFault 思否](https://segmentfault.com/t/cloud-foundry)
* [https://www.terraform.io](https://www.terraform.io)
* [https://github.com/rancher/rancher](https://github.com/rancher/rancher)
* [https://github.com/mesosphere/marathon](https://github.com/mesosphere/marathon)
* Ansible
* Packer
* 谷歌、IBM、微软、Pivotal、SAP、SUSE、Swisscom、GE
* [https://github.com/openzfs/zfs](https://github.com/openzfs/zfs)
* [https://github.com/wekan/wekan](https://github.com/wekan/wekan)
* [https://github.com/google/gvisor](https://github.com/google/gvisor)
* [https://github.com/fnproject](https://github.com/fnproject)
* [https://github.com/verrazzano](https://github.com/verrazzano)


- [systemd-nspawn以及container的学习](https://www.cnblogs.com/godcrying1202/archive/2004/01/13/14122532.html)
- [https://github.com/coreos](https://github.com/coreos)
- Linux Container [https://github.com/lxc/lxc](https://github.com/lxc/lxc)
    - [https://linuxcontainers.org](https://linuxcontainers.org)
    - [https://github.com/tailhook/unshare](https://github.com/tailhook/unshare)
- podman [https://github.com/containers](https://github.com/containers)
    - [https://github.com/lxc](https://github.com/lxc)
    - [https://github.com/AdaptiveScale/lxdui](https://github.com/AdaptiveScale/lxdui)
    - [再见 Docker，是时候拥抱下一代容器工具了](https://mp.weixin.qq.com/s/MDi4RB5V60EGl3ii9usD0Q)
    - [podman初试-和docker对比](https://blog.51cto.com/13447608/2448072)
- [https://github.com/containerd/containerd](https://github.com/containerd/containerd)
- [https://github.com/moby/moby](https://github.com/moby/moby)
- [https://github.com/coreos](https://github.com/coreos)
- [https://github.com/cri-o/cri-o](https://github.com/cri-o/cri-o)
- [https://github.com/kata-containers](https://github.com/kata-containers)
    - [https://github.com/hyperhq](https://github.com/hyperhq)
        - [https://www.hyperhq.com](https://www.hyperhq.com)
    - [https://github.com/clearcontainers](https://github.com/clearcontainers)
- [https://github.com/chaosblade-io/chaosblade](https://github.com/chaosblade-io/chaosblade)
- [https://github.com/alibaba/pouch](https://github.com/alibaba/pouch)
- [https://github.com/singularity/singularity](https://github.com/singularity/singularity)
- 集群管理器 [https://github.com/apache/mesos](https://github.com/apache/mesos)
    - [https://github.com/mesos](https://github.com/mesos)
- [https://github.com/OpenVZ](https://github.com/OpenVZ)
- [https://github.com/firecracker-microvm/firecracker](https://github.com/firecracker-microvm/firecracker)
- [https://github.com/kata-containers/kata-containers](https://github.com/kata-containers/kata-containers)
- [https://github.com/kestra-io/kestra](https://github.com/kestra-io/kestra)


**运行时**

+ [https://github.com/topics/oci](https://github.com/topics/oci)

* [https://github.com/utam0k/youki](https://github.com/utam0k/youki)
* [https://github.com/containers/crun](https://github.com/containers/crun)
* [https://github.com/oracle/railcar](https://github.com/oracle/railcar)
* [https://github.com/opencontainers/runc](https://github.com/opencontainers/runc)




## 仓库镜像

+ 查找最快的docker镜像: [https://github.com/silenceshell/docker_mirror](https://github.com/silenceshell/docker_mirror)

* Docker官方映像 [https://github.com/docker-library](https://github.com/docker-library)
* [https://hub.docker.com](https://hub.docker.com)
* [https://hub.daocloud.io](https://hub.daocloud.io)

- [https://www.daocloud.io/mirror](https://www.daocloud.io/mirror)

> 以下镜像地址需要直接配置在docker中，不能通过浏览器访问

* 阿里云 [https://cr.console.aliyun.com](https://cr.console.aliyun.com)
    * [https://alzgoonw.mirror.aliyuncs.com](https://alzgoonw.mirror.aliyuncs.com)
    * [https://jvqgqnis.mirror.aliyuncs.com](https://jvqgqnis.mirror.aliyuncs.com)
    * [https://3laho3y3.mirror.aliyuncs.com](https://3laho3y3.mirror.aliyuncs.com)
    * [https://cty6v5sm.mirror.aliyuncs.com](https://cty6v5sm.mirror.aliyuncs.com)
* ustc中国科技大学 [https://docker.mirrors.ustc.edu.cn](https://docker.mirrors.ustc.edu.cn)
* 网易 [http://hub-mirror.c.163.com](http://hub-mirror.c.163.com)
* Docker 官方中国区 [https://registry.docker-cn.com](https://registry.docker-cn.com)
* Azure 中国镜像 [https://dockerhub.azk8s.cn](https://dockerhub.azk8s.cn)
* 七牛云加速器 [https://reg-mirror.qiniu.com](https://reg-mirror.qiniu.com)
* 腾讯云 [https://mirror.ccs.tencentyun.com](https://mirror.ccs.tencentyun.com)



## Docker命令

```bash
# 退出docker容器
# 如果容器内部没有任何程序运行, 一旦执行exit, 退出容器时, 容器将结束运行
exit

# 查看运行中的容器
docker ps
# 查看全部的容器, 包括运行中和已停止运行的容器
docker ps -a

# 通过容器名称删除已经停止运行的容器(test-centos为docker run命令中给容器的命名)
docker rm test-centos
# 通过容器ID删除已经停止运行的容器,与上面的命令效果一样, 060e是containerID的前4位
docker rm 060e
# 强制删除状态为Up, 正在运行中的容器
docker rm -f test-centos
```


## Docker compose

* [Docker Compose概述](https://docs.docker.com/compose)
* [Compose文件参考](https://docs.docker.com/compose/compose-file)
* [docker-compose.yml 配置文件编写详解](https://blog.csdn.net/qq_36148847/article/details/79427878)
* [Docker Compose 详解](https://www.jianshu.com/p/658911a8cff3)
* [Docker Compose 配置文件详解](https://www.jianshu.com/p/2217cfed29d7)
* [docker run 和 docker-compose 配置挂载 Volume 并运行 nginx](https://www.jianshu.com/p/e11e01b9d675)


> Compose 文件是一个 YAML , 主要定义了 `services`,`networks` 和 `volumes`，其默认路径是 `./docker-compose.yml`

> `service` 定义包含了应用与每个容器的配置，很像给 `docker run` 传参，同样， 
> `network` 和 `volume` 对于 `docker network create` 和 `docker volume create` 也类似。

> 像在 Dockerfile （eg: `CMD` , `EXPOSE` , `VOLUME` , `ENV`）可以使用的选项也可以在 `docker run`参数中使用，
> 这样在 `docker-compose.yml` 里就不需要再次指定了。

> `docker-compose.yml` 里可以使用环境变量，类似 `Bash` 格式 `${VARIABLE}`

- `composer` 文件格式有两种版本：
    - `version 1`: 已经废弃， 不支持`volumes` 和 `networks`，默认 `version key` 是省略的。
    - `version 2`: 推荐的格式，目前是最新的，需要通过 `version '2'` 指定。



**ports**

> 暴露端口。既可以是 `HOST:CONTAINER` ，也可以只用容器端口(host端口会随机选取)。
> 当以 `HOST:CONTAINER` 的形式映射端口的时候，当容器的端口低于60的时候可能会遇到错误，
> 因为YAML会解析 xx:yy 数字为60。 基于这个原因，我们推荐明确指定端口映射用字符串的形式。

**volumes**

> 挂载指定的路径或者`named volumes`, 可以在主机上指定一个路径 HOST:CONTAINER ,或者一个可访问的 HOST:CONTAINER:ro 。




## Dockerfile

* [Dockerfile参考](https://docs.docker.com/engine/reference/builder)
* [编写Dockerfile的最佳实践](https://docs.docker.com/develop/develop-images/dockerfile_best-practices)
* [Dockerfile 基本命令详解](https://mp.weixin.qq.com/s/2poLYm-MgAEJxCYiRZDnQw)

- 创建`Dockerfile`文件

```bash
vi Dockerfile
```

- 添加内容

```dockerfile
# 使用的基础镜像
FROM centos:7
# 作者信息
MAINTAINER bajins "claer@bajins.com"

# 创建目录
RUN mkdir -p /data/java/jdk1.7.0_80
# 把当前目录下的jdk文件夹添加到镜像
ADD jdk1.7.0_80 /data/java/jdk1.7.0_80

# 创建tomcat目录
RUN mkdir -p /data/java/tomcat-8080
# 把当前目录下的tomcat文件夹添加到镜像
ADD tomcat-8080 /data/java/tomcat-8080

# 添加环境变量
ENV JAVA_HOME /data/java/jdk1.7.0_80
ENV CATALINA_HOME /data/java/tomcat-8080
ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/bin

# 暴露容器端口
EXPOSE 8080
EXPOSE 8090

# 启动时运行tomcat
CMD ["/data/java/tomcat-8080/bin/catalina.sh","run"]
```

```dockerfile
FROM centos:7

#安装wget工具
RUN yum -y install wget

#下载并且安装jdk设置环境变量
COPY jdk-8u201-linux-x64.rpm jdk-8u201-linux-x64.rpm
RUN rpm -ivh jdk-8u201-linux-x64.rpm
ENV JAVA_HOME /usr/java/latest/
ENV PATH=$JAVA_HOME/bin:$PATH
ENV CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
RUN rm -rf jdk-8u201-linux-x64.rpm

#时区中文等处理
RUN cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && \
    echo 'Asia/Shanghai' >/etc/timezone
RUN yum -y install kde-l10n-Chinese

#配置显示中文
RUN localedef -c -f UTF-8 -i zh_CN zh_CN.utf8
ENV LC_ALL zh_CN.utf8
RUN echo "export LC_ALL=zh_CN.utf8" >> /etc/profile
```
