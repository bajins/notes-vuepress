(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{327:function(s,a,t){"use strict";t.r(a);var e=t(3),r=Object(e.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mysql主从同步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql主从同步","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL主从同步")]),s._v(" "),t("h2",{attrs:{id:"配置主服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置主服务器","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置主服务器")]),s._v(" "),t("h3",{attrs:{id:"在-mysqld-节点下按需添加"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-mysqld-节点下按需添加","aria-hidden":"true"}},[s._v("#")]),s._v(" 在[mysqld]节点下按需添加")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置server_id，一般设置为IP,注意要唯一")]),s._v("\nserver_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("100\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复制过滤：也就是指定数据库不用同步,多个之间用','号分割")]),s._v("\nbinlog-ignore-db"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql,information_schema,preformance_schema\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定需要同步的二进制数据库")]),s._v("\nbinlog-do-db"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启二进制日志功能，可以随便取，最好有含义（关键就是这里了）")]),s._v("\nlog-bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("edu-mysql-bin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为每个session 分配的内存，在事务过程中用来存储二进制日志的缓存")]),s._v("\nbinlog_cache_size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1M\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 主从复制的格式（mixed,statement,row，默认格式是statement）")]),s._v("\nbinlog_format"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixed\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 二进制日志自动删除/过期的天数。默认值为0，表示不自动删除。")]),s._v("\nexpire_logs_days"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("5\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致")]),s._v("\nslave_skip_errors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1062\n")])])]),t("h3",{attrs:{id:"创建数据同步用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建数据同步用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建数据同步用户")]),s._v(" "),t("h4",{attrs:{id:"这里主要是要授予用户replication-slave权限和replication-client权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#这里主要是要授予用户replication-slave权限和replication-client权限","aria-hidden":"true"}},[s._v("#")]),s._v(" 这里主要是要授予用户REPLICATION SLAVE权限和REPLICATION CLIENT权限")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'slave'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" IDENTIFIED "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLICATION")]),s._v(" SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLICATION")]),s._v(" CLIENT "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'slave'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h2",{attrs:{id:"配置从服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置从服务器","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置从服务器")]),s._v(" "),t("h3",{attrs:{id:"在-mysqld-节点下按需添加-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-mysqld-节点下按需添加-2","aria-hidden":"true"}},[s._v("#")]),s._v(" 在[mysqld]节点下按需添加")]),s._v(" "),t("h4",{attrs:{id:"从库中的server-id-值一定不要跟主库的一样"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从库中的server-id-值一定不要跟主库的一样","aria-hidden":"true"}},[s._v("#")]),s._v(" 从库中的server-id 值一定不要跟主库的一样")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置server_id，一般设置为IP,注意要唯一")]),s._v("\nserver_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复制过滤：也就是指定数据库不用同步,多个之间用','号分割")]),s._v("\nbinlog"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ignore")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("db"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("information_schema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("preformance_schema\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定需要同步的二进制数据库")]),s._v("\nbinlog"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("db"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启二进制日志功能，以备Slave作为其它Slave的Master时使用")]),s._v("\nlog"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("edu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("slave1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为每个session 分配的内存，在事务过程中用来存储二进制日志的缓存")]),s._v("\nbinlog_cache_size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("M\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 主从复制的格式（mixed,statement,row，默认格式是statement）")]),s._v("\nbinlog_format"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixed\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 二进制日志自动删除/过期的天数。默认值为0，表示不自动删除。")]),s._v("\nexpire_logs_days"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致")]),s._v("\nslave_skip_errors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1062")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# relay_log配置中继日志")]),s._v("\nrelay_log"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("edu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("relay"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# log_slave_updates表示slave将复制事件写进自己的二进制日志")]),s._v("\nlog_slave_updates"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 防止改变数据(除了特殊的线程)")]),s._v("\nread_only"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("h3",{attrs:{id:"先查询主服务器当前二进制log文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先查询主服务器当前二进制log文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 先查询主服务器当前二进制log文件")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" MASTER "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("STATUS")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h4",{attrs:{id:"查询出来如下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询出来如下","aria-hidden":"true"}},[s._v("#")]),s._v(" 查询出来如下")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("File")]),s._v(" "),t("th",[s._v("Position")]),s._v(" "),t("th",[s._v("Binlog_Do_DB")]),s._v(" "),t("th",[s._v("Binlog_Ignore_DB")]),s._v(" "),t("th",[s._v("Executed_Gtid_Set")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("mysql-bin.000025")]),s._v(" "),t("td",[s._v("154")]),s._v(" "),t("td",[s._v("ichangg_im")]),s._v(" "),t("td"),s._v(" "),t("td")])])]),s._v(" "),t("h3",{attrs:{id:"进入从服务器mysql执行以下命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入从服务器mysql执行以下命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 进入从服务器MySQL执行以下命令")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("CHANGE MASTER "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" MASTER_HOST"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主服务器IP'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("MASTER_PORT"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("MASTER_USER"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主服务器同步用户名'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("MASTER_PASSWORD"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("MASTER_LOG_FILE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主MySQL二进制文件名'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("MASTER_LOG_POS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Position字段中数据"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("MASTER_CONNECT_RETRY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h4",{attrs:{id:"上面执行的命令的解释："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上面执行的命令的解释：","aria-hidden":"true"}},[s._v("#")]),s._v(" 上面执行的命令的解释：")]),s._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[t("span",{pre:!0,attrs:{class:"token inserted"}},[s._v("+ MASTER_HOST='192.168.1.100' #Master的IP地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token inserted"}},[s._v("+ MASTER_USER='slave' #用于同步数据的用户（在Master中授权的用户）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token inserted"}},[s._v("+ MASTER_PASSWORD='123456' #同步数据用户的密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token inserted"}},[s._v("+ MASTER_PORT=3306 #Master数据库服务的端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token inserted"}},[s._v("+ MASTER_LOG_FILE='edu-mysql-bin.000001' #指定Slave从哪个日志文件开始读复制数据（Master上执行命令的结果的File字段）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token inserted"}},[s._v("+ MASTER_LOG_POS=429 #从哪个POSITION号开始读（Master上执行命令的结果的Position字段）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token inserted"}},[s._v("+ MASTER_CONNECT_RETRY=30 #当建立主从连接时，如果连接建立失败，间隔多久后重试。单位为秒，默认设置为60秒，同步延迟调优参数。")]),s._v("\n")])])]),t("h3",{attrs:{id:"查看主从同步状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看主从同步状态","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看主从同步状态")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" slave "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"开启复制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启复制","aria-hidden":"true"}},[s._v("#")]),s._v(" 开启复制")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("START")]),s._v(" SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"如果出现以下错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如果出现以下错误","aria-hidden":"true"}},[s._v("#")]),s._v(" 如果出现以下错误")]),s._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[t("span",{pre:!0,attrs:{class:"token deleted"}},[s._v("- ERROR 1872 (HY000): Slave failed to initialize relay log info structure from the repository")]),s._v("\n")])])]),t("h4",{attrs:{id:"看样子是找不到中继日志的仓库，但是查看变量relay-log的位置是设置了的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#看样子是找不到中继日志的仓库，但是查看变量relay-log的位置是设置了的","aria-hidden":"true"}},[s._v("#")]),s._v(" 看样子是找不到中继日志的仓库，但是查看变量relay log的位置是设置了的")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'relay%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h4",{attrs:{id:"重置复制信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重置复制信息","aria-hidden":"true"}},[s._v("#")]),s._v(" 重置复制信息")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("RESET MASTER"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h4",{attrs:{id:"查看主从复制是否还有主从配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看主从复制是否还有主从配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看主从复制是否还有主从配置")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" SLAVE "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("STATUS")]),s._v("\\G\n")])])]),t("h4",{attrs:{id:"如果还有就执行以下命令清除所有"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如果还有就执行以下命令清除所有","aria-hidden":"true"}},[s._v("#")]),s._v(" 如果还有就执行以下命令清除所有")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("RESET SLAVE "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h4",{attrs:{id:"再次开启复制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#再次开启复制","aria-hidden":"true"}},[s._v("#")]),s._v(" 再次开启复制")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("START")]),s._v(" SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"查看主从复制是否成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看主从复制是否成功","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看主从复制是否成功")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" SLAVE "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("STATUS")]),s._v("\\G\n")])])]),t("h4",{attrs:{id:"如果有以下错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如果有以下错误","aria-hidden":"true"}},[s._v("#")]),s._v(" 如果有以下错误")]),s._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[t("span",{pre:!0,attrs:{class:"token deleted"}},[s._v("- Error 'Operation CREATE USER failed for 'slave'@'%'' on query. Default database: ''. Query: ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token deleted"}},[s._v("- 'CREATE USER 'slave'@'%' IDENTIFIED WITH 'mysql_native_password' AS '*040A65A51A0B047A826CDE05448536015D471E15''")]),s._v("\n")])])]),t("h4",{attrs:{id:"先执行以下命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先执行以下命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 先执行以下命令")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("STOP SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("START")]),s._v(" SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h4",{attrs:{id:"如果错误仍然存在，执行以下命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如果错误仍然存在，执行以下命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 如果错误仍然存在，执行以下命令")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("STOP SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'slave'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("START")]),s._v(" SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h1",{attrs:{id:"返回顶部"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#返回顶部","aria-hidden":"true"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"#readme"}},[s._v("返回顶部")])])])},[],!1,null,null,null);a.default=r.exports}}]);